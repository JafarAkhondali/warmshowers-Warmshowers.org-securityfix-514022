<?php
/**
 * @file ws_redesign.install
 *
 * Some things can't be done with features, so we'll do them with hook_update_N() for deployment.
 *
 */

/**
 * Implements hook_install().
 *
 * Run updates that might need to be run.
 */
function ws_redesign_install() {
  ws_redesign_update_6002();
}


/**
 * Add required Warmshowers custom menus
 * - Footer menu
 * - Anon Main Menu
 * - Logged-in Main Menu
 */
//function ws_redesign_update_6001() {
//  $ret = array();
//
//  $ret[] = ws_redesign_create_custom_menu('footer_menu', t('Footer Menu'), t('Menu for use in Warmshowers Footer'));
//  $ret[] = ws_redesign_create_custom_menu('anon_main_menu', t('Anon Main Menu'), t('Main Menu for Warmshowers Anon User (Home/Signup/FAQ/etc)'));
//  $ret[] = ws_redesign_create_custom_menu('logged_in_main_menu', t('Logged In Main Menu'), t('Main Menu for Warmshowers Logged-In User (Home/FAQ/Forums/etc)'));
//
//  return $ret;
//}

/**
 * Disable blocks already configured for garland or warmshowers_zen. We want context to have complete control.
 */
function ws_redesign_update_6002() {
  $ret[] = update_sql("UPDATE {blocks} SET status = 0 WHERE theme IN ('warmshowers_zen', 'garland')");
  return $ret;
}
